!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t(require,exports,module):e.ShareButton=t()}(this,function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}"classList"in document.documentElement||!Object.defineProperty||"undefined"==typeof HTMLElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var e,t,n;return n=function(e){return function(n){var i,o;i=t.className.split(/\s+/),o=i.indexOf(n),e(i,o,n),t.className=i.join(" ")}},t=this,e={add:n(function(e,t,n){~t||e.push(n)}),remove:n(function(e,t){~t&&e.splice(t,1)}),toggle:n(function(e,t,n){~t?e.splice(t,1):e.push(n)}),contains:function(e){return!!~t.className.split(/\s+/).indexOf(e)},item:function(e){return t.className.split(/\s+/)[e]||null}},Object.defineProperty(e,"length",{get:function(){return t.className.split(/\s+/).length}}),e}}),void 0===NodeList.prototype[Symbol.iterator]&&(NodeList.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return{done:t>=e.length,value:e.item(t++)}}}});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){i(this,e)}return r(e,[{key:"_hide",value:function(e){e.style.display="none"}},{key:"_show",value:function(e){e.style.display="block"}},{key:"_hasClass",value:function(e,t){return e.classList.contains(t)}},{key:"_addClass",value:function(e,t){e.classList.add(t)}},{key:"_removeClass",value:function(e,t){e.classList.remove(t)}},{key:"_isEncoded",value:function(e){return e=e.toRFC3986(),decodeURIComponent(e)!==e}},{key:"_encode",value:function(e){return"undefined"==typeof e||null===e||this._isEncoded(e)?e:e.toRFC3986()}},{key:"popup",value:function t(e){var n=this,i=void 0===arguments[1]?{}:arguments[1],t={width:500,height:350};t.top=screen.height/2-t.height/2,t.left=screen.width/2-t.width/2;var o=function(){var e=[],t=!0,o=!1,r=void 0;try{for(var s,a=Object.keys(i)[Symbol.iterator]();!(t=(s=a.next()).done);t=!0){var l=s.value,c=i[l];e.push(""+l+"="+n._encode(c))}}catch(u){o=!0,r=u}finally{try{!t&&a["return"]&&a["return"]()}finally{if(o)throw r}}return e.join("&")}();o&&(o="?"+o),window.open(e+o,"targetWindow","\n        toolbar=no,\n        location=no,\n        status=no,\n        menubar=no,\n        scrollbars=yes,\n        resizable=yes,\n        left="+t.left+",\n        top="+t.top+",\n        width="+t.width+",\n        height="+t.height+"\n      ")}},{key:"_merge",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){"object"!=typeof e&&(e={});for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if("object"==typeof i){e[n]=this._merge(e[n],i);continue}e[n]=i}for(var o=2,r=arguments.length;r>o;o++)_merge(e,arguments[o]);return e})},{key:"_objToArray",value:function(e){var t=[];for(var n in e)"object"==typeof e[n]&&t.push(e[n]);return t}},{key:"_isMobile",value:function(){return navigator.userAgent.match(/Android|iPhone/i)&&!navigator.userAgent.match(/iPod|iPad/i)?!0:!1}}]),e}();String.prototype.toRFC3986=function(){var e=encodeURIComponent(this);e.replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16)})},String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e,t,n){for(var i=!0;i;){var o=e,r=t,s=n;a=c=l=void 0,i=!1;var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;return void 0===l?void 0:l.call(s)}var c=Object.getPrototypeOf(o);if(null===c)return void 0;e=c,t=r,n=s,i=!0}},l=function(e){function t(e,n){i(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),"object"==typeof e?(this.element=void 0,n=e):this.element=e,this.el={head:document.getElementsByTagName("head")[0],body:document.getElementsByTagName("body")[0]},this.config={enabledNetworks:0,protocol:"//",url:window.location.href,caption:null,title:this._defaultTitle(),image:this._defaultImage(),description:this._defaultDescription(),ui:{flyout:"top center",buttonText:"Share",buttonFont:!0,iconFont:!0,css:!0,collision:!1},networks:{googlePlus:{enabled:!0,url:null},twitter:{enabled:!0,url:null,description:null},facebook:{enabled:!0,loadSdk:!0,url:null,appId:null,title:null,caption:null,description:null,image:null},pinterest:{enabled:!0,url:null,image:null,description:null},reddit:{enabled:!0,url:null,title:null},linkedin:{enabled:!0,url:null,title:null,description:null},whatsapp:{enabled:!0,description:null,url:null},email:{enabled:!0,title:null,description:null}}},this._setup(this.element,n)}return o(t,e),r(t,[{key:"open",value:function(){this._public("Open")}},{key:"close",value:function(){this._public("Close")}},{key:"toggle",value:function(){this._public("Toggle")}},{key:"_public",value:function(e){var t=!0,n=!1,i=void 0;try{for(var o,r=document.querySelectorAll(this.element)[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var s=o.value,a=s.getElementsByClassName("social")[0];this["event"+e](a)}}catch(l){n=!0,i=l}finally{try{!t&&r["return"]&&r["return"]()}finally{if(n)throw i}}}},{key:"_setup",value:function(e,t){var n=void 0;n="undefined"==typeof e?this._objToArray(document.getElementsByTagName("share-button")):document.querySelectorAll("share-button"+e),this._merge(this.config,t),this.config.networks.whatsapp.enabled&&!this._isMobile()&&(this.config.networks.whatsapp.enabled=!1),this._detectNetworks(),this._normalizeNetworkConfiguration(),this.config.ui.defaultStyles&&this._injectStylesheet("dist/styles.min.css"),this.config.networks.facebook.enabled&&this.config.networks.facebook.loadSdk&&this._injectFacebookSdk();var i=0,o=!0,r=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var c=a.value;this._setupInstance(c,i++)}}catch(u){r=!0,s=u}finally{try{!o&&l["return"]&&l["return"]()}finally{if(r)throw s}}}},{key:"_setupInstance",value:function(e,t){var n=this;this._hide(e),this.clicked=!1,this._addClass(e,"sharer-"+t),this._injectHtml(e),this.config.ui.css&&this._injectStylesheet("dist/styles.min.css"),this._show(e);var i=e.getElementsByTagName("label")[0],o=e.getElementsByClassName("social")[0],r=e.getElementsByTagName("li");this._addClass(o,"networks-"+this.config.enabledNetworks),i.addEventListener("click",function(){return n._eventToggle(o,i)});var s=function(t){var i=r[t];"undefined"!=typeof i&&(i.style.display=n.config.networks[i.getAttribute("data-network")].display,i.addEventListener("click",function(){n._eventNetwork(e,i),n._eventClose(o)}))};for(var a in Object.keys(r))s(a)}},{key:"_eventToggle",value:function(e,t){this._hasClass(e,"active")?this._eventClose(e):this._eventOpen(e,t)}},{key:"_eventOpen",value:function(e,t){this._hasClass(e,"load")&&this._removeClass(e,"load"),this._collisionDetection(e,t),this._addClass(e,"active")}},{key:"_eventClose",value:function(e){this._removeClass(e,"active")}},{key:"_eventNetwork",value:function(e,t){var n=t.getAttribute("data-network");this._hook("before",n,e),this["_network"+n.capitalizeFirstLetter()](),this._hook("after",n,e)}},{key:"_collisionDetection",value:function(e,t){var n=this,i={labelWidth:document.getElementsByClassName("export")[0].offsetWidth,labelHeight:document.getElementsByClassName("export")[0].offsetHeight,buttonWidth:document.getElementsByClassName("social")[0].offsetWidth};this._adjustClasses(e,t,i),this.clicked||(window.addEventListener("scroll",function(){return n._adjustClasses(e,t,i)}),window.addEventListener("resize",function(){return n._adjustClasses(e,t,i)}),this.clicked=!0)}},{key:"_adjustClasses",value:function(e,t,n){var i=window.innerWidth,o=window.innerHeight,r=t.getBoundingClientRect().left+n.labelWidth/2,s=i-r,a=(e.getBoundingClientRect().left+n.buttonWidth/2,t.getBoundingClientRect().top+n.labelHeight/2),l=this._findLocation(r,a,i,o);if("middle"===l[1]&&"center"!==l[0]&&("left"===l[0]&&i<=r+220+n.buttonWidth/2||"right"===l[0]&&i<=s+220+n.buttonWidth/2))e.classList.add("top"),e.classList.remove("middle","bottom");else{switch(l[1]){case"top":e.classList.add("bottom"),e.classList.remove("middle","top");break;case"middle":e.classList.add("middle"),e.classList.remove("top","bottom");break;case"bottom":e.classList.add("top"),e.classList.remove("middle","bottom")}switch(l[0]){case"left":e.classList.add("right"),e.classList.remove("center","left");break;case"center":e.classList.add("center","top"),e.classList.remove("left","right","middle");break;case"right":e.classList.add("left"),e.classList.remove("center","right")}}}},{key:"_findLocation",value:function(e,t,n,i){var o=["left","center","right"],r=["top","middle","bottom"],s=Math.trunc(3*(1-(n-e)/n)),a=Math.trunc(3*(1-(i-t)/i));return s>=3?s=2:-1>=s&&(s=0),a>=3?a=2:-1>=a&&(a=0),[o[s],r[a]]}},{key:"_networkFacebook",value:function(){return this.config.networks.facebook.loadSdk?window.FB?FB.ui({method:"feed",name:this.config.networks.facebook.title,link:this.config.networks.facebook.url,picture:this.config.networks.facebook.image,caption:this.config.networks.facebook.caption,description:this.config.networks.facebook.description}):console.error("The Facebook JS SDK hasn't loaded yet."):this.popup("https://www.facebook.com/sharer/sharer.php",{u:this.config.networks.facebook.url})}},{key:"_networkTwitter",value:function(){this.popup("https://twitter.com/intent/tweet",{text:this.config.networks.twitter.description,url:this.config.networks.twitter.url})}},{key:"_networkGooglePlus",value:function(){this.popup("https://plus.google.com/share",{url:this.config.networks.googlePlus.url})}},{key:"_networkPinterest",value:function(){this.popup("https://www.pinterest.com/pin/create/button",{url:this.config.networks.pinterest.url,media:this.config.networks.pinterest.image,description:this.config.networks.pinterest.description})}},{key:"_networkLinkedin",value:function(){this.popup("https://www.linkedin.com/shareArticle",{mini:"true",url:this.config.networks.linkedin.url,title:this.config.networks.linkedin.title,summary:this.config.networks.linkedin.description})}},{key:"_networkEmail",value:function(){this.popup("mailto:",{subject:this.config.networks.email.title,body:this.config.networks.email.description})}},{key:"_networkReddit",value:function(){this.popup("http://www.reddit.com/submit",{url:this.config.networks.reddit.url,title:this.config.networks.reddit.title})}},{key:"_networkWhatsapp",value:function(){var e="whatsapp://send?text=";e+=encodeURIComponent(this.config.networks.whatsapp.description)+"%20",e+=encodeURIComponent(this.config.networks.whatsapp.url),this.popup(e)}},{key:"_injectStylesheet",value:function(e){if(!this.el.head.querySelector("link[href='"+e+"']")){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),this.el.head.appendChild(t)}}},{key:"_injectHtml",value:function(e){e.innerHTML="<label class='export'><span>"+this.config.ui.buttonText+"</span></label><div class='social load "+this.config.ui.flyout+"'><ul><li class='pinterest' data-network='pinterest'></li><li class='twitter' data-network='twitter'></li><li class='facebook' data-network='facebook'></li><li class='whatsapp' data-network='whatsapp'></li><li class='gplus' data-network='googlePlus'></li><li class='reddit' data-network='reddit'></li><li class='linkedin' data-network='linkedin'></li><li class='paper-plane' data-network='email'></li></ul></div>"}},{key:"_injectFacebookSdk",value:function(){if(!window.FB&&this.config.networks.facebook.appId&&!this.el.body.querySelector("#fb-root")){var e=document.createElement("script");e.text="window.fbAsyncInit=function(){FB.init({appId:'"+this.config.networks.facebook.appId+"',status:true,xfbml:true})};(function(e,t,n){var r,i=e.getElementsByTagName(t)[0];if(e.getElementById(n)){return}r=e.createElement(t);r.id=n;r.src='//connect.facebook.net/en_US/all.js';i.parentNode.insertBefore(r,i)})(document,'script','facebook-jssdk');";var t=document.createElement("div");t.id="fb-root",this.el.body.appendChild(t),this.el.body.appendChild(e)}}},{key:"_hook",value:function(e,t,n){var i=this.config.networks[t][e];if("function"==typeof i){var o=i.call(this.config.networks[t],n);void 0!==o&&(o=this._normalizeFilterConfigUpdates(o),this.extend(this.config.networks[t],o,!0),this._normalizeNetworkConfiguration())}}},{key:"_defaultTitle",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:title"]')||document.querySelector('meta[name="twitter:title"]'))?e.getAttribute("content"):(e=document.querySelector("title"))?e.innerText:void 0}},{key:"_defaultImage",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:image"]')||document.querySelector('meta[name="twitter:image"]'))?e.getAttribute("content"):void 0}},{key:"_defaultDescription",value:function(){var e=void 0;return(e=document.querySelector('meta[property="og:description"]')||document.querySelector('meta[name="twitter:description"]')||document.querySelector('meta[name="description"]'))?e.getAttribute("content"):""}},{key:"_detectNetworks",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,o=Object.keys(this.config.networks)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var r=i.value,s=void 0,a=!0,l=!1,c=void 0;try{for(var u,d=Object.keys(this.config.networks[r])[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;null===this.config.networks[r][f]&&(this.config.networks[r][f]=this.config[f])}}catch(h){l=!0,c=h}finally{try{!a&&d["return"]&&d["return"]()}finally{if(l)throw c}}this.config.networks[r].enabled?(s="block",this.config.enabledNetworks+=1):s="none",this.config.networks[r].display=s}}catch(h){t=!0,n=h}finally{try{!e&&o["return"]&&o["return"]()}finally{if(t)throw n}}}},{key:"_normalizeNetworkConfiguration",value:function(){this.config.networks.facebook.appId||(this.config.networks.facebook.loadSdk=!1),this.config.networks.twitter.description&&(this._isEncoded(this.config.networks.twitter.description)||(this.config.networks.twitter.description=encodeURIComponent(this.config.networks.twitter.description))),"number"==typeof this.config.networks.facebook.appId&&(this.config.networks.facebook.appId=this.config.networks.facebook.appId.toString())}},{key:"_normalizeFilterConfigUpdates",value:function(e){return this.config.networks.facebook.appId!==e.appId&&(console.warn("You are unable to change the Facebook appId after the button has been initialized. Please update your Facebook filters accordingly."),delete e.appId),this.config.networks.facebook.loadSdk!==e.loadSdk&&(console.warn("You are unable to change the Facebook loadSdk option after the button has been initialized. Please update your Facebook filters accordingly."),delete e.appId),e}}]),t}(s);return l});